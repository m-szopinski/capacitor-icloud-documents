{"version":3,"file":"plugin.cjs.js","sources":["esm/index.js","esm/web.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ICloudDocs = void 0;\nconst core_1 = require(\"@capacitor/core\");\nconst ICloudDocs = (0, core_1.registerPlugin)('ICloudDocs', {\n    web: () => import('./web.js').then(m => new m.ICloudDocsWeb()),\n});\nexports.ICloudDocs = ICloudDocs;\n__exportStar(require(\"./definitions\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ICloudDocsWeb = void 0;\nconst core_1 = require(\"@capacitor/core\");\nrequire(\"@browserfs/core\");\nrequire(\"@browserfs/dom\");\nconst bfs = require('@browserfs/core');\nconst bfs_dom = require('@browserfs/dom');\n// import {\n//   initialize,\n// } from '@browserfs/core/emulation/shared'\nclass ICloudDocsWeb extends core_1.WebPlugin {\n    async echo(options) {\n        console.log('ECHO', options);\n        return options;\n    }\n    async readFile(options) {\n        console.log('Read iCloud file', options);\n        return new Promise((resolve, reject) => {\n            bfs.fs.readFile(options.filePath, 'utf-8', (err, content) => {\n                if (err) {\n                    reject(err);\n                }\n                resolve({\n                    fileStream: content,\n                });\n            });\n        });\n    }\n    async readFileB64(options) {\n        console.log('Read Base64 iCloud file', options);\n        return new Promise((resolve, reject) => {\n            bfs.fs.readFile(options.filePath, (err, content) => {\n                if (err) {\n                    reject(err);\n                }\n                resolve({\n                    fileStream: content?.toString() || '',\n                });\n            });\n        });\n    }\n    async removeFile(options) {\n        console.log('Remove iCloud file', options);\n        return new Promise((resolve, reject) => {\n            bfs.fs.unlink(options.filePath, err => {\n                if (err) {\n                    reject(err);\n                }\n                resolve({\n                    result: 'OK',\n                    url: options.filePath,\n                });\n            });\n        });\n    }\n    async writeFile(options) {\n        console.log('Write iCloud file', options);\n        return new Promise((resolve, reject) => {\n            bfs.fs.writeFile(options.filePath, options.data, err => {\n                if (err) {\n                    reject(err);\n                }\n                resolve({\n                    result: 'OK',\n                    url: options.filePath,\n                });\n            });\n        });\n    }\n    async fileExist(options) {\n        console.log('Check if iCloud file exist', options);\n        return new Promise(resolve => {\n            bfs.fs.exists(options.path, exist => {\n                resolve({\n                    result: exist,\n                });\n            });\n        });\n    }\n    async mkdir(options) {\n        console.log('Create iCloud directory', options);\n        return new Promise((resolve, reject) => {\n            bfs.fs.mkdir(options.path, undefined, err => {\n                if (err) {\n                    reject(err);\n                }\n                resolve({\n                    result: 'OK',\n                    url: options.path,\n                });\n            });\n        });\n    }\n    async stat(options) {\n        console.log('Stat of iCloud file', options);\n        return new Promise((resolve, reject) => {\n            bfs.fs.stat(options.path, (err, result) => {\n                if (err) {\n                    reject(err);\n                }\n                resolve({\n                    type: result.isDirectory() ? 'Directory' : 'File',\n                    size: result.size,\n                    modificationDate: result?.mtime.toString() || new Date().toString(),\n                    creationDate: result?.ctime.toString() || new Date().toString(),\n                });\n            });\n        });\n    }\n    async readdir(options) {\n        console.log('List iCloud files', options);\n        return new Promise((resolve, reject) => {\n            bfs.fs.readdir(options.path, (err, result) => {\n                if (err) {\n                    reject(err);\n                }\n                resolve({\n                    result: result || [],\n                });\n            });\n        });\n    }\n    async initUbiquitousContainer() {\n        console.log('Init iCloud container');\n        bfs.registerBackend(bfs_dom.StorageFileSystem);\n        return bfs.configure({ '/': 'Storage' });\n    }\n    async syncToCloud(options) {\n        console.log('Sync iCloud file', options);\n        return { url: '' };\n    }\n}\nexports.ICloudDocsWeb = ICloudDocsWeb;\n//# sourceMappingURL=web.js.map"],"names":["this","core_1"],"mappings":"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"}